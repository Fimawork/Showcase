<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="google-site-verification" content="我是費馬工作室，專注於3D網頁介面與使用者體驗設計。" />
		<meta name="viewport" content="width=device-width", initial-scale="1.0", maximum-scale="1.0", user-scalable="no"/>
		<meta name="description" content="我是費馬工作室，專注於3D網頁介面與使用者體驗設計。"/>
		<meta name="keywords" content="設計工作室,3D網頁設計,3D Website Design"/>
		<meta http-equiv="X-UA-Compatible" content="ie=edge"/>
		<title>3D網頁範例| 費馬工作室 | fimawork | 3D網頁設計、3D Website Design</title>
		<style type="text/css">

			body
			{
				margin: 0;
				padding:0; 
			}
			
			canvas
			{
				width: 100%;
   				height: 100%;
			}

			#threeContainer
			{
				position: absolute;
				top: 0%;
				left: 0%;
				width: 100%;
				height: 100%;
			}

			.fimawork_logo
			{
				position:absolute;
				bottom:3%;
				left: 1.5%;
				height: 3.9%;
				aspect-ratio: 192/33;
				background-image: url(./images/fimawork_logo_C_gray.png);
				background-size: 100% 100%;
				opacity: 1;
				z-index: 99;
				user-select: none;
			}

			.fimawork_logo:hover
			{
				opacity: 0.5;
			}

			#loadingUI{
				position: absolute;
				left: 50%;
				top:50%;
				width: 180px;
				height:180px;
				background-image: url(./images/portfolio_2023_loading.png);
				background-size: 100% 100%; 
				background-position: center;
			}

			@keyframes UI_rotate
			{
				0% {transform: rotate(0);}
  				8.33% {transform: rotate(30deg);}
				16.66% {transform: rotate(60deg);}
				24.99% {transform: rotate(90deg);}
				33.32%	{transform: rotate(120deg);}
				41.65%	{transform: rotate(150deg);}
				49.98%	{transform: rotate(180deg);}
				58.31%	{transform: rotate(210deg);}
				66.64%	{transform: rotate(240deg);}
				74.97%	{transform: rotate(270deg);}
				83.3%	{transform: rotate(300deg);}
				91.63%	{transform: rotate(330deg);}
				100% {transform: rotate(360deg);}
			}

			.rotate_anim{
				animation: UI_rotate;
				animation-duration: 1.5s;
				animation-timing-function: step-end;
				animation-iteration-count: infinite;
			}
			
		</style>

		<script type="importmap">
			{
			  "imports": {
				"three": "https://cdn.jsdelivr.net/npm/three@0.180.0/build/three.module.js",
				"three/addons/": "https://cdn.jsdelivr.net/npm/three@0.180.0/examples/jsm/"
			  }
			}
		</script>

	</head>
	
	<body>
		<div id="threeContainer" class="SceneCrossEffect_anim"></div> 
		<div id="loadingUI" class="rotate_anim"></div>
		<div class="fimawork_logo" onclick="parent.open('https://fimawork.tw/')"></div>
		<script type="module">

import * as THREE from 'three';

import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
import * as FX from 'https://cdn.jsdelivr.net/gh/Fimawork/threejs_tools@v1.5/fx_functions.js';
import * as FXM from 'https://cdn.jsdelivr.net/gh/Fimawork/threejs_tools@v1.5/fx_materials.js';
import { HDRLoader } from 'three/addons/loaders/HDRLoader.js';
import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
import { TIFFLoader } from 'three/addons/loaders/TIFFLoader.js';
import { GUI } from 'three/addons/libs/lil-gui.module.min.js';
import { chair_20251216 } from './models/chair_20251216_slices.js';

let scene, camera, renderer, stats, mixer;
let controls;
let threeContainer = document.getElementById("threeContainer");
let _loadingUI = document.getElementById("loadingUI");

const clock = new THREE.Clock();

const modelPosition=new THREE.Vector3(0,0,0);
const modelRotation=new THREE.Vector3(0,Math.PI*0.5, 0);
const modeScale=0.02;

const CameraDefaultPos=new THREE.Vector3(-8.266,5.931,7.888);
const ControlsTargetDefaultPos=new THREE.Vector3(1.029,0.409,0.051);

let main_model= new THREE.Object3D();

let idleTime=0;
const hold_time=6;

init();

function init()
{
	FX.SetupEnvironment("cloud");

  	scene = new THREE.Scene();

  	camera = new THREE.PerspectiveCamera( 45, threeContainer.clientWidth / threeContainer.clientHeight, 0.1, 1000 );//非全螢幕比例設定
  	renderer = new THREE.WebGLRenderer({ antialias: true });
  	renderer.setSize(threeContainer.clientWidth, threeContainer.clientHeight);

  	renderer.setClearColor(0x000000, 0.0);//需加入這一條，否則看不到CSS的底圖
  	renderer.toneMapping = THREE.ACESFilmicToneMapping;
  	renderer.toneMappingExposure = 0.9;
  	//document.body.appendChild( renderer.domElement );
  	threeContainer.appendChild( renderer.domElement );

  	camera.position.copy(CameraDefaultPos);
  
  	///利用座標設定旋轉中心及鏡頭焦點，camera不須另外設定初始角度
  	controls = new OrbitControls( camera, renderer.domElement );
  	controls.enablePan = true;//右鍵平移效果
  	controls.panSpeed = 0.4;
  	controls.enableDamping = true;
  	controls.dampingFactor =0.015;
  	controls.maxDistance = 500;
  	controls.target.copy( ControlsTargetDefaultPos );
  	controls.zoomSpeed=0.5;
	controls.autoRotate=false;
	controls.autoRotateSpeed=0.3;
  	controls.update();

  	///hdri 環境光源
	FX.LoadHDRWithPMREM('./textures/hdri/studio_small_09_2k.hdr',scene,renderer);
	
	///eames-chair
	const loader_eames_chair = new GLTFLoader();
    loader_eames_chair.setDRACOLoader(FX.dracoLoader);
	loader_eames_chair.parse(
    FX.Base64ToArrayBuffer(chair_20251216()),
    '',
    (gltf) => {
        
		const model = gltf.scene;

		const support_material=FXM.InstMaterial(0x000000,0.5,0.75,0,2.333,1,false,1,true);

		const knob_material=FXM.InstMaterial(0x000000,0.15,1,0,2.333,1,false,1,true);

		const sofa_back_01_material=FXM.InstEtchingMaterial(0x080808,0.4,0.3,0.75,false,1,'./textures/Leather.png',new THREE.Vector2(10,10),new THREE.Vector2(0,0),'./textures/Leather.png',new THREE.Vector2(15, 15),0);

		const woodPanel_01_material=FXM.InstEtchingMaterial(0xc08854,0.5,0.5,0.5,false,1,'./textures/Walnut_culomn.png',new THREE.Vector2(0.8,0.8),new THREE.Vector2(0,0),'./textures/Walnut_culomn.png',new THREE.Vector2(1, 1),0);

		const woodPanel_02_material=FXM.InstEtchingMaterial(0xc08854,0.5,0.5,0.5,false,1,'./textures/Walnut.png',new THREE.Vector2(1,1),new THREE.Vector2(0,0),'./textures/Walnut.png',new THREE.Vector2(1, 1),0);

		FX.ReturnBufferGeometry(model.getObjectByName("wood_panel_01"),woodPanel_01_material,main_model,scene);
		FX.ReturnBufferGeometry(model.getObjectByName("wood_panel_02"),woodPanel_01_material,main_model,scene);
		FX.ReturnBufferGeometry(model.getObjectByName("wood_panel_03"),woodPanel_01_material,main_model,scene);
		FX.ReturnBufferGeometry(model.getObjectByName("wood_panel_04"),woodPanel_02_material,main_model,scene);
		FX.ReturnBufferGeometry(model.getObjectByName("support_back"),support_material,main_model,scene);
		FX.ReturnBufferGeometry(model.getObjectByName("support_buttom_main"),support_material,main_model,scene);
		FX.ReturnBufferGeometry(model.getObjectByName("support_buttom_sub"),support_material,main_model,scene);
		FX.ReturnBufferGeometry(model.getObjectByName("cap"),null,main_model,scene);
		FX.ReturnBufferGeometry(model.getObjectByName("sofa_back_01"),sofa_back_01_material,main_model,scene);
		FX.ReturnBufferGeometry(model.getObjectByName("sofa_back_02"),sofa_back_01_material,main_model,scene);
		FX.ReturnBufferGeometry(model.getObjectByName("sofa_main"),sofa_back_01_material,main_model,scene);
		FX.ReturnBufferGeometry(model.getObjectByName("sofa_sub"),sofa_back_01_material,main_model,scene);
		FX.ReturnBufferGeometry(model.getObjectByName("sofa_hand_01"),sofa_back_01_material,main_model,scene);
		FX.ReturnBufferGeometry(model.getObjectByName("sofa_hand_02"),sofa_back_01_material,main_model,scene);
		FX.ReturnBufferGeometry(model.getObjectByName("knob"),knob_material,main_model,scene);

		//item_02_object.add(model);

		main_model.position.set(0,1.4,0);
		main_model.rotation.set(0,FX.ToThreeEulerAngle(-90), 0);
		main_model.scale.set(0.004,0.004,0.004);

		scene.add(main_model);

		animate();
		setTimeout(() => {_loadingUI.remove();}, 600);
    },
    (error) => {
        console.error('Failed to load model:', error);
    }
	);

	///EventListener
  	window.addEventListener( 'resize', onWindowResize );  

  		window.addEventListener("pointerdown", (event) => {
		
		idleTime=0;
		controls.autoRotate=false;
		
	});

	window.addEventListener( 'pointermove', function(e) {
		
		idleTime=0;
		controls.autoRotate=false;
		
	});

  	window.addEventListener("wheel", (event) => {
		
		idleTime=0;
		controls.autoRotate=false;
		
	});
}


function onWindowResize() 
{
    camera.aspect = threeContainer.clientWidth/threeContainer.clientHeight;//非全螢幕比例設定
	camera.updateProjectionMatrix();
    renderer.setSize( threeContainer.clientWidth, threeContainer.clientHeight);
}

function animate() 
{
  	requestAnimationFrame( animate );

  	controls.update();
  	renderer.render( scene, camera );
  	//UpdateCameraPosition(camera,controls);


	const delta = clock.getDelta();

	if ( mixer ) mixer.update( delta );

	idleTime+=delta;
	
	if(idleTime>hold_time)
	{
		controls.autoRotate=true;
	}

}
		</script>
    </body>

</html>